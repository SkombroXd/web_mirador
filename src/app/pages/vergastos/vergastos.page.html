<ion-content>
  <div class="container">
    <aside class="sidebar">
      <div class="profile">
        <div class="avatar"></div>
        <h3>MIRADOR</h3>
        <p>Gestion de gastos de departamentos</p>
      </div>
      <nav class="menu">
        <a routerLink="/home">Generar gastos comunes</a>
        <a routerLink="/departamento">Agregar departamento</a>
        <a routerLink="/pagogastos">Pago de gastos</a>
        <a routerLink="/vergastos" class="active">Ver gastos comunes</a>
        <a routerLink="/gpendientes">Morosidad</a>
      </nav>
    </aside>
    <main class="content">
      <h1>Registro de Gastos</h1>
      <section class="form-section">
          <h2>Filtros de búsqueda</h2>
          <div class="filter-container">
            <div class="select-group">
              <label>Año</label>
              <div class="select filter-year">
                <select id="filter-year" [(ngModel)]="filtros.ano" (change)="aplicarFiltros()">
                  <option>Todos los años</option>
                  <option>2010</option>
                  <option>2011</option>
                  <option>2012</option>
                  <option>2013</option>
                  <option>2014</option>
                  <option>2015</option>
                  <option>2016</option>
                  <option>2017</option>
                  <option>2018</option>
                  <option>2019</option>
                  <option>2020</option>
                  <option>2021</option>
                  <option>2022</option>
                  <option>2023</option>
                  <option>2024</option>
                  <option>2025</option>
                </select>
              </div>
            </div>
            <div class="select-group">
              <label>Mes</label>
              <div class="select filter-month">
                <select id="filter-month" [(ngModel)]="filtros.mes" (change)="aplicarFiltros()">
                  <option>Todos los meses</option>
                  <option>01</option>
                  <option>02</option>
                  <option>03</option>
                  <option>04</option>
                  <option>05</option>
                  <option>06</option>
                  <option>07</option>
                  <option>08</option>
                  <option>09</option>
                  <option>10</option>
                  <option>11</option>
                  <option>12</option>
                </select>
              </div>
            </div>
            <div class="select-group">
              <label>Estado de pago</label>
              <div class="select filter-pago">
                <select id="filter-pago" [(ngModel)]="filtros.estado" (change)="aplicarFiltros()">
                  <option>Todos los estados</option>
                  <option>Pagado</option>
                  <option>Pendiente</option>
                </select>
              </div>
            </div>
          </div>
        <table class="data-table">
          <thead>
            <tr>
              <th>N° Depto</th>
              <th>Fecha Emisión</th>
              <th>Monto Gasto</th>
              <th>Total a Pagar</th>
              <th>Estado</th>
              <th>Fecha Pago</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let gasto of gastosFiltrados">
              <td>{{ gasto.numero_depto }}</td>
              <td>{{ gasto.fecha_emision | date:'dd/MM/yyyy' }}</td>
              <td>$ {{ gasto.monto_gasto | number }}</td>
              <td>$ {{ gasto.total_pago | number }}</td>
              <td>{{ gasto.pago ? 'Pagado' : 'Pendiente' }}</td>
              <td>{{ gasto.fecha_pago ? (gasto.fecha_pago | date:'dd/MM/yyyy') : '-' }}</td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
  </div>
</ion-content>
